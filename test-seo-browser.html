<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO Browser Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .status {
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        .warning { background: #fff3cd; color: #856404; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
        .meta-display {
            background: white;
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>SEO Browser Test</h1>
    <p>This page tests the SEO implementation in a real browser environment.</p>
    
    <div class="test-section">
        <h2>Test Controls</h2>
        <button onclick="runBasicTests()">Run Basic Tests</button>
        <button onclick="testSEOInitialization()">Test SEO Initialization</button>
        <button onclick="displayCurrentSEO()">Display Current SEO</button>
        <button onclick="testWithRealData()">Test with Real Portfolio Data</button>
        <button onclick="clearResults()">Clear Results</button>
    </div>
    
    <div class="test-section">
        <h2>Test Results</h2>
        <div id="test-results">
            <div class="status info">Click "Run Basic Tests" to start testing</div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Current Meta Tags</h2>
        <div id="meta-display" class="meta-display">
            Click "Display Current SEO" to see meta tags
        </div>
    </div>
    
    <div class="test-section">
        <h2>Structured Data</h2>
        <pre id="structured-data-display">Click "Display Current SEO" to see structured data</pre>
    </div>
    
    <!-- Include the required scripts in the same order as the main app -->
    <script src="js/types.js"></script>
    <script src="js/data.js"></script>
    <script src="js/seo.js"></script>
    
    <script>
        // Test data
        const testPortfolioData = {
            personal: {
                name: 'Sarah Johnson',
                title: 'Senior DevOps Engineer & Cloud Architect',
                bio: 'Passionate DevOps engineer with 7+ years of experience in cloud infrastructure, automation, and security. Specialized in building scalable, secure, and efficient cloud solutions.',
                summary: 'Experienced DevOps professional specializing in Cloud Infrastructure, Automation, Security, and CI/CD pipelines. Dedicated to creating robust, scalable solutions that enable rapid, secure software delivery.',
                contact: {
                    email: 'sarah.johnson@example.com',
                    linkedin: 'https://linkedin.com/in/sarahjohnson',
                    github: 'https://github.com/sarahjohnson'
                },
                headshot: 'images/profile/sarah-johnson.jpg'
            },
            experience: [
                {
                    id: 'exp1',
                    company: 'CloudTech Solutions',
                    title: 'Senior DevOps Engineer',
                    duration: '2021 - Present',
                    achievements: [
                        'Reduced deployment time by 80% through CI/CD automation',
                        'Managed infrastructure for 50+ microservices',
                        'Implemented monitoring solutions reducing downtime by 60%'
                    ],
                    technologies: ['AWS', 'Kubernetes', 'Terraform', 'Jenkins', 'Python']
                }
            ],
            projects: [
                {
                    id: 'proj1',
                    title: 'Multi-Cloud Infrastructure Platform',
                    description: 'Automated infrastructure provisioning across AWS, Azure, and GCP',
                    tools: ['Terraform', 'Ansible', 'Python', 'Docker'],
                    outcomes: ['Reduced provisioning time by 90%', 'Standardized deployments across clouds']
                }
            ],
            skills: [
                {
                    category: 'Cloud Platforms',
                    skills: [
                        { name: 'AWS', proficiency: 'expert' },
                        { name: 'Kubernetes', proficiency: 'expert' },
                        { name: 'Terraform', proficiency: 'expert' }
                    ]
                },
                {
                    category: 'DevOps Tools',
                    skills: [
                        { name: 'Jenkins', proficiency: 'advanced' },
                        { name: 'Docker', proficiency: 'expert' },
                        { name: 'Ansible', proficiency: 'advanced' }
                    ]
                }
            ]
        };
        
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = message;
            document.getElementById('test-results').appendChild(div);
        }
        
        function clearResults() {
            document.getElementById('test-results').innerHTML = '<div class="status info">Results cleared</div>';
        }
        
        function runBasicTests() {
            clearResults();
            addResult('Running basic SEO tests...', 'info');
            
            // Test 1: Check if SEO Manager is available
            if (typeof window.SEOManager !== 'undefined') {
                addResult('✓ SEO Manager is available', 'success');
            } else {
                addResult('✗ SEO Manager is not available', 'error');
                return;
            }
            
            // Test 2: Check if SEO Manager has required methods
            const requiredMethods = ['initialize', 'updateTitle', 'addOpenGraphTags', 'validateHeadingHierarchy'];
            let methodsOk = true;
            
            requiredMethods.forEach(method => {
                if (typeof window.SEOManager[method] === 'function') {
                    addResult(`✓ Method ${method} exists`, 'success');
                } else {
                    addResult(`✗ Method ${method} missing`, 'error');
                    methodsOk = false;
                }
            });
            
            if (methodsOk) {
                addResult('✓ All required methods are available', 'success');
            }
            
            // Test 3: Test heading hierarchy validation
            const hierarchyResult = window.SEOManager.validateHeadingHierarchy();
            if (hierarchyResult.isValid) {
                addResult('✓ Heading hierarchy is valid', 'success');
            } else {
                addResult(`⚠ Heading hierarchy issues: ${hierarchyResult.errors.join(', ')}`, 'warning');
            }
        }
        
        function testSEOInitialization() {
            addResult('Testing SEO initialization...', 'info');
            
            try {
                window.SEOManager.initialize(testPortfolioData);
                addResult('✓ SEO initialization successful', 'success');
                
                // Check if title was updated
                if (document.title.includes('Sarah Johnson')) {
                    addResult('✓ Page title updated correctly', 'success');
                } else {
                    addResult(`⚠ Page title may not be updated: ${document.title}`, 'warning');
                }
                
                // Check if meta description was added/updated
                const metaDesc = document.querySelector('meta[name="description"]');
                if (metaDesc && metaDesc.content.includes('DevOps')) {
                    addResult('✓ Meta description updated correctly', 'success');
                } else {
                    addResult('⚠ Meta description may not be updated correctly', 'warning');
                }
                
                // Check if Open Graph tags were added
                const ogTitle = document.querySelector('meta[property="og:title"]');
                if (ogTitle && ogTitle.content.includes('Sarah Johnson')) {
                    addResult('✓ Open Graph tags added correctly', 'success');
                } else {
                    addResult('⚠ Open Graph tags may not be added correctly', 'warning');
                }
                
                // Check if structured data was added
                const structuredData = document.getElementById('structured-data');
                if (structuredData) {
                    addResult('✓ Structured data added successfully', 'success');
                } else {
                    addResult('⚠ Structured data not found', 'warning');
                }
                
            } catch (error) {
                addResult(`✗ SEO initialization failed: ${error.message}`, 'error');
            }
        }
        
        function displayCurrentSEO() {
            const metaDisplay = document.getElementById('meta-display');
            const structuredDisplay = document.getElementById('structured-data-display');
            
            // Display meta tags
            const metaInfo = [];
            metaInfo.push(`Title: ${document.title}`);
            
            const metaDesc = document.querySelector('meta[name="description"]');
            metaInfo.push(`Description: ${metaDesc ? metaDesc.content : 'Not set'}`);
            
            const metaKeywords = document.querySelector('meta[name="keywords"]');
            metaInfo.push(`Keywords: ${metaKeywords ? metaKeywords.content : 'Not set'}`);
            
            const ogTitle = document.querySelector('meta[property="og:title"]');
            metaInfo.push(`OG Title: ${ogTitle ? ogTitle.content : 'Not set'}`);
            
            const ogDesc = document.querySelector('meta[property="og:description"]');
            metaInfo.push(`OG Description: ${ogDesc ? ogDesc.content : 'Not set'}`);
            
            const twitterCard = document.querySelector('meta[name="twitter:card"]');
            metaInfo.push(`Twitter Card: ${twitterCard ? twitterCard.content : 'Not set'}`);
            
            metaDisplay.textContent = metaInfo.join('\n');
            
            // Display structured data
            const structuredData = document.getElementById('structured-data');
            if (structuredData) {
                try {
                    const data = JSON.parse(structuredData.textContent);
                    structuredDisplay.textContent = JSON.stringify(data, null, 2);
                } catch (error) {
                    structuredDisplay.textContent = 'Error parsing structured data: ' + error.message;
                }
            } else {
                structuredDisplay.textContent = 'No structured data found';
            }
        }
        
        function testWithRealData() {
            addResult('Testing with real portfolio data...', 'info');
            
            // Try to load real portfolio data if available
            if (window.portfolioData) {
                window.portfolioData.loadData().then(() => {
                    const realData = window.portfolioData.getData();
                    if (realData && realData.personal) {
                        window.SEOManager.initialize(realData);
                        addResult('✓ Initialized with real portfolio data', 'success');
                        displayCurrentSEO();
                    } else {
                        addResult('⚠ Real portfolio data not available, using test data', 'warning');
                        testSEOInitialization();
                    }
                }).catch(error => {
                    addResult(`⚠ Failed to load real data: ${error.message}`, 'warning');
                    addResult('Using test data instead', 'info');
                    testSEOInitialization();
                });
            } else {
                addResult('⚠ Portfolio data loader not available, using test data', 'warning');
                testSEOInitialization();
            }
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            addResult('SEO Browser Test loaded', 'info');
            
            // Check initial state
            if (typeof window.SEOManager !== 'undefined') {
                addResult('✓ SEO Manager loaded successfully', 'success');
            } else {
                addResult('✗ SEO Manager not loaded', 'error');
            }
            
            // Display initial SEO state
            setTimeout(() => {
                displayCurrentSEO();
            }, 100);
        });
    </script>
</body>
</html>