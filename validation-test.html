<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Validation Test</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; }
        .pass { color: green; } .fail { color: red; } .info { color: blue; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Portfolio Data Validation Test</h1>
    <div id="results">Loading...</div>

    <script src="js/types.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            const results = document.getElementById('results');
            let output = '';

            // Test 1: Basic validation functions
            output += '<div class="section"><h2>1. Basic Validation Functions</h2>';
            
            const emailTest = PortfolioTypes.isValidEmail('test@example.com');
            output += `<p class="${emailTest ? 'pass' : 'fail'}">Email validation: ${emailTest ? 'PASS' : 'FAIL'}</p>`;
            
            const urlTest = PortfolioTypes.isValidUrl('https://github.com/test');
            output += `<p class="${urlTest ? 'pass' : 'fail'}">URL validation: ${urlTest ? 'PASS' : 'FAIL'}</p>`;
            
            output += '</div>';

            // Test 2: Portfolio data validation
            output += '<div class="section"><h2>2. Portfolio Data Validation</h2>';
            
            try {
                const response = await fetch('data/portfolio.json');
                const portfolioData = await response.json();
                
                const validation = PortfolioTypes.validatePortfolioData(portfolioData);
                
                if (validation.isValid) {
                    output += '<p class="pass">✓ Portfolio data is VALID</p>';
                    output += `<p class="info">Data contains:</p>`;
                    output += `<ul>`;
                    output += `<li>Name: ${portfolioData.personal.name}</li>`;
                    output += `<li>Experience entries: ${portfolioData.experience.length}</li>`;
                    output += `<li>Projects: ${portfolioData.projects.length}</li>`;
                    output += `<li>Skill categories: ${portfolioData.skills.length}</li>`;
                    output += `</ul>`;
                } else {
                    output += '<p class="fail">✗ Portfolio data is INVALID</p>';
                    output += '<p>Errors found:</p><ul>';
                    validation.errors.forEach(error => {
                        output += `<li class="fail">${error}</li>`;
                    });
                    output += '</ul>';
                }
            } catch (error) {
                output += `<p class="fail">✗ Error loading portfolio data: ${error.message}</p>`;
            }
            
            output += '</div>';

            // Test 3: Individual validation tests
            output += '<div class="section"><h2>3. Individual Validation Tests</h2>';
            
            const testData = {
                validContact: {
                    email: 'test@example.com',
                    linkedin: 'https://linkedin.com/in/test',
                    github: 'https://github.com/test',
                    behance: 'https://behance.net/test'
                },
                invalidContact: {
                    email: 'invalid-email',
                    linkedin: 'not-a-url'
                }
            };
            
            const validContactTest = PortfolioTypes.validateContactInfo(testData.validContact);
            output += `<p class="${validContactTest.isValid ? 'pass' : 'fail'}">Valid contact info: ${validContactTest.isValid ? 'PASS' : 'FAIL'}</p>`;
            
            const invalidContactTest = PortfolioTypes.validateContactInfo(testData.invalidContact);
            output += `<p class="${!invalidContactTest.isValid ? 'pass' : 'fail'}">Invalid contact info detection: ${!invalidContactTest.isValid ? 'PASS' : 'FAIL'}</p>`;
            
            output += '</div>';

            // Test 4: Constants check
            output += '<div class="section"><h2>4. Validation Constants</h2>';
            output += '<pre>' + JSON.stringify(PortfolioTypes.VALIDATION_CONSTANTS, null, 2) + '</pre>';
            output += '</div>';

            results.innerHTML = output;
        });
    </script>
</body>
</html>