<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO Loading Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>SEO Manager Loading Test</h1>
    <p>This page tests if the SEO Manager loads correctly and is available globally.</p>
    
    <div id="test-results"></div>
    
    <h2>Console Output</h2>
    <pre id="console-output"></pre>
    
    <script>
        // Capture console output
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        const consoleOutput = [];
        
        function captureConsole(type, ...args) {
            consoleOutput.push(`[${type.toUpperCase()}] ${args.join(' ')}`);
            updateConsoleDisplay();
        }
        
        console.log = (...args) => {
            originalLog(...args);
            captureConsole('log', ...args);
        };
        
        console.error = (...args) => {
            originalError(...args);
            captureConsole('error', ...args);
        };
        
        console.warn = (...args) => {
            originalWarn(...args);
            captureConsole('warn', ...args);
        };
        
        function updateConsoleDisplay() {
            document.getElementById('console-output').textContent = consoleOutput.join('\n');
        }
        
        function addResult(message, type) {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = message;
            document.getElementById('test-results').appendChild(div);
        }
        
        // Test 1: Check if we can load the SEO script
        addResult('Loading SEO script...', 'info');
        
        // Load the SEO script dynamically to test
        const script = document.createElement('script');
        script.src = 'js/seo.js';
        script.onload = function() {
            addResult('✓ SEO script loaded successfully', 'success');
            
            // Test 2: Check if SEOManager is available
            setTimeout(() => {
                if (typeof window.SEOManager !== 'undefined') {
                    addResult('✓ SEOManager is available globally', 'success');
                    
                    // Test 3: Try to initialize with test data
                    try {
                        const testData = {
                            personal: {
                                name: 'Test User',
                                title: 'Test Title',
                                bio: 'Test bio',
                                summary: 'Test summary',
                                contact: {
                                    email: 'test@example.com'
                                }
                            },
                            experience: [],
                            projects: [],
                            skills: []
                        };
                        
                        window.SEOManager.initialize(testData);
                        addResult('✓ SEOManager initialized successfully', 'success');
                        
                        // Test 4: Check if meta tags were updated
                        const title = document.title;
                        const description = document.querySelector('meta[name="description"]');
                        
                        if (title.includes('Test User')) {
                            addResult('✓ Page title updated correctly', 'success');
                        } else {
                            addResult('✗ Page title not updated: ' + title, 'error');
                        }
                        
                        if (description && description.content.includes('Test')) {
                            addResult('✓ Meta description updated correctly', 'success');
                        } else {
                            addResult('✗ Meta description not updated', 'error');
                        }
                        
                        // Test 5: Check structured data
                        const structuredData = document.getElementById('structured-data');
                        if (structuredData) {
                            addResult('✓ Structured data added successfully', 'success');
                        } else {
                            addResult('✗ Structured data not found', 'error');
                        }
                        
                    } catch (error) {
                        addResult('✗ SEOManager initialization failed: ' + error.message, 'error');
                    }
                    
                } else {
                    addResult('✗ SEOManager is not available globally', 'error');
                    addResult('Available globals: ' + Object.keys(window).filter(k => k.includes('SEO')).join(', '), 'info');
                }
            }, 100);
        };
        
        script.onerror = function() {
            addResult('✗ Failed to load SEO script', 'error');
        };
        
        document.head.appendChild(script);
        
        // Also test if the script is available via direct inclusion
        setTimeout(() => {
            addResult('Current window.SEOManager status: ' + typeof window.SEOManager, 'info');
        }, 500);
    </script>
</body>
</html>